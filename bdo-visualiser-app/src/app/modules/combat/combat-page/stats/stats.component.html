<div *ngIf="isLoaded" class="page-tab">
    <div class="page-tab-content">
        <div class="row">
            <p-carousel class="w-100" [value]="carouselTabs" [numVisible]="1" [numScroll]="1">
                <ng-template let-tab pTemplate="tab">
                    <div #trashLootTab *ngIf="tab.id == 1">
                        <label class="mb-0">{{tab.label}}</label>
                        <div>
                            <div class="d-flex align-items-center justify-content-between" style="height: 30vh;">
                                <div class="d-flex flex-column"></div>
                                <div class="d-flex flex-column stat-container-a">
                                    <label class="font-weight-bold">Avg.</label>
                                    <div class="d-flex align-items-center justify-content-center mt-4">
                                        <label>{{combatStats.trashLootAmount.average | noRecordPipe}}</label>
                                    </div>
                                </div>
                                <div class="d-flex flex-column stat-container-a">
                                    <label class="font-weight-bold">Day</label>
                                    <div class="d-flex align-items-center justify-content-center mt-4">
                                        <label>{{combatStats.trashLootAmount.daily | noRecordPipe}}</label>
                                    </div>
                                </div>
                                <div class="d-flex flex-column stat-container-a">
                                    <label class="font-weight-bold">Week</label>
                                    <div class="d-flex align-items-center justify-content-center mt-4">
                                        <label>{{combatStats.trashLootAmount.weekly | noRecordPipe}}</label>
                                    </div>
                                </div>
                                <div class="d-flex flex-column stat-container-a">
                                    <label class="font-weight-bold">Month</label>
                                    <div class="d-flex align-items-center justify-content-center mt-4">
                                        <label>{{combatStats.trashLootAmount.monthly | noRecordPipe}}</label>
                                    </div>
                                </div>
                                <div class="d-flex flex-column stat-container-a">
                                    <label class="font-weight-bold">Year</label>
                                    <div class="d-flex align-items-center justify-content-center mt-4">
                                        <label>{{combatStats.trashLootAmount.yearly | noRecordPipe}}</label>
                                    </div>
                                </div>
                                <div class="d-flex flex-column"></div>
                            </div>
                        </div>
                    </div>
                    <div #locationTab *ngIf="tab.id == 2">
                        <div class="row">
                            <div class="col-7 d-flex align-items-center">
                                <label class="mb-0 mr-2 w-100">{{tab.label}}</label> 
                                <p-dropdown [filter]="true" filterBy="locationName" class="w-100" [options]="combatStats.locationsGrouped" [(ngModel)]="selectedLocation" optionLabel="locationName" [group]="true" placeholder="select location" (onChange)="getSelectedLocationData($event)">
                                    <ng-template let-group pTemplate="group">
                                        <div class="p-d-flex p-ai-center">
                                            <span>{{group.label}}</span>
                                        </div>
                                    </ng-template>
                                </p-dropdown>
                            </div>
                            <div class="col-5"></div>
                        </div>
                          
                        <div>
                            <div *ngIf="!locationIsSelected || !locationStats.hasRecordAvailable; else locationSelected" class="d-flex align-items-center justify-content-between" style="height: 30vh;">
                                <div class="d-flex flex-column"></div>
                                <div class="d-flex flex-column">
                                    <label>No Location Data</label>
                                </div>
                                <div class="d-flex flex-column"></div>
                            </div>
                            <ng-template #locationSelected>
                                <div style="height: 30vh;">
                                    <label class="font-weight-bold mb-0">Trash Loot</label>
                                    <div class="row m-0">
                                        <div class="col p-0 m-2 stat-container-c">
                                            <label class="font-weight-bold pl-2">Avg.</label>
                                            <div class="d-flex align-items-center justify-content-center mt-1">
                                                <label>{{locationStats.trashLootAmount.average | noRecordPipe}}</label>
                                            </div>
                                        </div>
                                        <div class="col p-0 m-2 stat-container-c">
                                            <label class="font-weight-bold pl-2">Day</label>
                                            <div class="d-flex align-items-center justify-content-center mt-1">
                                                <label>{{locationStats.trashLootAmount.daily | noRecordPipe}}</label>
                                            </div>
                                        </div>
                                        <div class="col p-0 m-2 stat-container-c">
                                            <label class="font-weight-bold pl-2">Week</label>
                                            <div class="d-flex align-items-center justify-content-center mt-1">
                                                <label>{{locationStats.trashLootAmount.weekly | noRecordPipe}}</label>
                                            </div>
                                        </div>
                                        <div class="col p-0 m-2 stat-container-c">
                                            <label class="font-weight-bold pl-2">Month</label>
                                            <div class="d-flex align-items-center justify-content-center mt-1">
                                                <label>{{locationStats.trashLootAmount.monthly | noRecordPipe}}</label>
                                            </div>
                                        </div>
                                        <div class="col p-0 m-2 stat-container-c">
                                            <label class="font-weight-bold pl-2">Year</label>
                                            <div class="d-flex align-items-center justify-content-center mt-1">
                                                <label>{{locationStats.trashLootAmount.yearly | noRecordPipe}}</label>
                                            </div>
                                        </div>
                                    </div>
                                    <label class="font-weight-bold mb-0">Other</label>
                                    <div class="row m-0">
                                        <div class="col p-0 m-2 stat-container-c">
                                            <label class="font-weight-bold pl-2">Top Server</label>
                                            <div class="d-flex align-items-center justify-content-center mt-1">
                                                <label>{{locationStats.serverCount.serverDescription | noRecordPipe}}</label>
                                            </div>
                                        </div>
                                        <div class="col p-0 m-2 stat-container-c">
                                            <label class="font-weight-bold pl-2">Top Class</label>
                                            <div class="d-flex align-items-center justify-content-center mt-1">
                                                <label>{{locationStats.userClassCount.userClassDescription | noRecordPipe}}</label>
                                            </div>
                                        </div>
                                        <div class="col p-0 m-2 stat-container-c">
                                            <label class="font-weight-bold pl-2">Hours</label>
                                            <div class="d-flex align-items-center justify-content-center mt-1">
                                                <label>{{locationStats.hoursStats.hoursTotal | timeHours}}</label>
                                            </div>
                                        </div>
                                        <div class="col p-0 m-2 stat-container-c">
                                            <label class="font-weight-bold pl-2">Afuaru</label>
                                            <div class="d-flex align-items-center justify-content-center mt-1">
                                                <label>{{locationStats.afuaruSpawns.total | noRecordPipe}}</label>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </ng-template>
                        </div>
                    </div>
                    <div #agrisTab *ngIf="tab.id == 3">
                        <label class="mb-0">{{tab.label}}</label>
                    </div>
                    <div #afuaruTab *ngIf="tab.id == 4">
                        <label class="mb-0">{{tab.label}}</label>
                    </div>
                </ng-template>
            </p-carousel>
        </div>
        <div class="row combat-stats-container">
            <div *ngIf="combatStats.locationCount.length > 0 else noLocationData" class="col-md-3">
                <div>
                    <label>Locations</label>
                </div>
                <div class="mb-2">
                    <p-listbox disabled="true" [options]="combatStats.locationCount" optionLabel="locationDescription"></p-listbox>
                </div>
            </div>
            <ng-template #noLocationData>
                <div class="col-md-3">
                    <div>
                        <label>Locations</label>
                    </div>
                    <div class="mb-2">
                        <div class="stat-container-b">
                            <label class="mb-0">N/A</label>
                        </div>
                    </div>
                </div>
            </ng-template>
            <div *ngIf="combatStats.territoryCount.length > 0 else noTerritoryData" class="col-md-3">
                <div>
                    <label>Territories</label>
                </div>
                <div class="mb-2">
                    <p-listbox disabled="true" [options]="combatStats.territoryCount" optionLabel="territoryDescription"></p-listbox>
                </div>
            </div>
            <ng-template #noTerritoryData>
                <div class="col-md-3">
                    <div>
                        <label>Territories</label>
                    </div>
                    <div class="mb-2">
                        <div class="stat-container-b">
                            <label class="mb-0">N/A</label>
                        </div>
                    </div>
                </div>
            </ng-template>
            <div *ngIf="combatStats.combatTypeCount.length > 0 else noCombatTypeData" class="col-md-3">
                <div>
                    <label>Combat Types</label>
                </div>
                <div class="mb-2">
                    <p-listbox disabled="true" [options]="combatStats.combatTypeCount" optionLabel="combatTypeDescription"></p-listbox>
                </div>
            </div>
            <ng-template #noCombatTypeData>
                <div class="col-md-3">
                    <div>
                        <label>Combat Types</label>
                    </div>
                    <div class="mb-2">
                        <div class="stat-container-b">
                            <label class="mb-0">N/A</label>
                        </div>
                    </div>
                </div>
            </ng-template>
            <div *ngIf="combatStats.userClassCount.length > 0 else noClassData" class="col-md-3">
                <div>
                    <label>Classes</label>
                </div>
                <div class="mb-2">
                    <p-listbox disabled="true" [options]="combatStats.userClassCount" optionLabel="userClassDescription"></p-listbox>
                </div>
            </div>
            <ng-template #noClassData>
                <div class="col-md-3">
                    <div>
                        <label>Classes</label>
                    </div>
                    <div class="mb-2">
                        <div class="stat-container-b">
                            <label class="mb-0">N/A</label>
                        </div>
                    </div>
                </div>
            </ng-template>
            <div *ngIf="combatStats.serverCount.length > 0 else noServerData" class="col-md-3">
                <div>
                    <label>Servers</label>
                </div>
                <div class="mb-2">
                    <p-listbox disabled="true" [options]="combatStats.serverCount" optionLabel="serverDescription"></p-listbox>
                </div>
            </div>
            <ng-template #noServerData>
                <div class="col-md-3">
                    <div>
                        <label>Servers</label>
                    </div>
                    <div class="mb-2">
                        <div class="stat-container-b">
                            <label class="mb-0">N/A</label>
                        </div>
                    </div>
                </div>   
            </ng-template>
            <div class="col-md-3">
                <div>
                    <label>Hours Today</label>
                </div>
                <div class="mb-2">
                    <div class="stat-container-b">
                        <label class="mb-0">{{combatStats.timeAmount.daily | timeHours}}</label>  
                    </div> 
                </div>
            </div>
            <div class="col-md-3">
                <div>
                    <label>Hours This Week</label>
                </div>
                <div class="mb-2">
                    <div class="stat-container-b">
                        <label class="mb-0">{{combatStats.timeAmount.weekly | timeHours}}</label>
                    </div>
                </div>
            </div>
            <div calss="col"></div> 
        </div>
    </div>
</div>